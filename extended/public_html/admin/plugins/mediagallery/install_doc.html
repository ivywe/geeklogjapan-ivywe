<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <style type="text/css">
  <!--
    body {
    font-family: Helvetica, Arial, sans-serif;
    margin: 25px;
    }

    h1 {
    font-size: 1.5em;
    border-bottom: thin outset black;
    }

    h2 {
    margin: 0 0 0.5em 0;
    font-size: 1em;
    }

    h3 {
    border-bottom: 1px solid #0033FF;
    border-left: 6px solid #0033FF;
    padding: 0.25em;
    font-size: 1em;
    }

    h4 {
    font-size: 0.85em;
    font-weight: bold;
    margin: 0.2em 0;
    }

    p {
    font-size: 0.85em;
    margin: 0.5em 0;
    }

    .attention {
    color:#FF3300
    }

    ul {
    margin-top: 0.5em;
    margin-bottom: 1em;
    }

    li {
    font-size: 0.8em;
    margin: 0.5em 0;
    }

    li p {
    font-size: 0.8em;
    margin: 0.5em 0;
    }

    .email {
    padding-left: 1.3em;
    font-size: small;
    font-weight: normal;
    }

    pre {
    padding: 0.2em;
    border: 1px solid #BBBBBB;
    background-color: #EEEEEE;
    margin: 1em 1em 1em 3em;
    overflow: auto;
    font-size: 0.85em;
    line-height: 1.5em;
    }

    table {
    font-size: 0.8em;
    border: solid 1px black;
    border-collapse: collapse;
    }

    th,
    td
    {
    border: solid 1px black;
    padding: 5px;
    }

    span.comment {
    color: green;
    font-weight: bold;
    }

    .goto {
    margin: 1em 0 1.5em 0.5em;
    font-size: 0.8em;
    }

    .fix {
    color: red;
    font-weight: bold;
    }

    .new {
    color: blue;
    font-weight: bold;
    }

    .center {
    text-align: center;
    }

  -->
  </style>
  <title>Media Gallery Plugin for Geeklog - Installation</title>
</head>

<body>

<h1>Media Gallery Plugin for Geeklog - Installation</h1>

<p>Media Gallery follows the standard Geeklog plugins procedure,
which has not been well documented.
Below we will document two methods to install the Media Gallery files,
via FTP and via standard shell access to the server.</p>

<h3>FTP Installation</h3>

<p>If you do not have shell access to your server and can only use an FTP client to access your server,
follow these instructions.
If you have shell access to your server,
you may want to jump down to the
<span style="font-weight: bold;">Shell Access Installation</span>
instructions below.</p>

<p>To install Media Gallery, or any Geeklog plugin,
you will need to un-archive the plugin on your local computer.
The Media Gallery distribution will automatically create all the proper directories when it is un-archived. </p>

<p>To un-archive a .gz file, you can use later copies of WinZIP or WinRAR. </p>

<ol>
  <li>Create a temporary directory on your local hard drive to hold the Media Gallery files
      (let&rsquo;s use C:\tmp for our example). </li>
  <li>Open the mediagallery_1.7.0_2.0.0.tar.gz file with WinRAR. </li>
  <li>Select Extract All Files and point to the C:\tmp directory as the destination. </li>
</ol>

<p>Now we should have a local copy of the Media Gallery Plugin in C:\tmp </p>

<p>The directory should look like this:</p>

<pre><code>+tmp\
    + mediagallery\
                  + admin\
                  + docs\
                  + include\
                  + language\
                  + public_html\
                  + sql\
                  + templates\
                  + tmp\
                  + uploads\
                  + autoinstall.php
                  + </code></pre>

<p>Now that you have a copy on your local hard drive, it is time to FTP up to your server. </p>

<p>Start your FTP program,
I recommend FileZilla if you do not have a program you use already.
FileZilla is free and supports many different operating systems (Windows, Linux, etc.).</p>

<p>Connect to your web server with your FTP program.&nbsp; </p>

<p>Our first FTP will be the entire Media Gallery distribution to your server.
You will want to use the diagrams below to find the proper directory on your server and move the
entire c:\tmp\mediagallery\ directory to the path-to-geeklog/plugins/
directory.</p>

<p>path-to-geeklog directory is the directory db-configphp exists.</p>

<p><span style="font-weight: bold;">SPECIAL NOTE:</span> For
the initial FTP of the Media Gallery distribution, you will want to
actually drag the mediagallery folder from your local computer to the plugins
directory on your server.&nbsp; The remaining
FTP&rsquo;s below you will actually drag the files, not the parent directory.</p>

<pre><code>tmp\                path-to-geeklog/
   |                               |
   + mediagallery\--+              + backups/
                    |              + data/
                    |              + language/
                    |              + logs/
                    +-------------&gt;+ plugins/
                                   + public_html/
                                   + sql/
                                   + system/
                                   + db-config.php</code></pre>

<p>Next, you will need to make a sub-directory under the
public_html directory on your server called mediagallery.
For most FTP programs you can create directories by highlighting the parent directory,
public_html in this case, then right click the mouse, select New Folder and name it mediagallery.
This procedure may be a little different depending on which FTP program you are using,
check their documentation. </p>

<pre><code>  path-to-geeklog/
                 |
                 + backups/
                 + data/
                 + language/
                 + logs/
                 + plugins/
                 + public_html/
                              |
                              + mediagallery &lt;--- Make this subdirectory
                 + sql/
                 + system/
                 + db-config.php</code></pre>

<p>Next you will need to FTP all the files from the
c:\tmp\mediagallery\public_html\* directory to your server.
Here you will want to select all the files and sub-directories in the public_html\ directory,
not just the public_html\ folder. Follow the diagram below:</p>

<pre><code>tmp\                 path-to-geeklog/
   |                                |
   + mediagallery\                  + backups/
                 |                  + data/
                 + public_html\*-+  + language/
                                 |  + logs/
                                 |  + plugins/
                                 |  + public_html/
                                 |               |
                                 +--------------&gt;+ mediagallery/
                                    + sql/
                                    + system/
                                    + db-config.php</code></pre>

<p>Next, you will need to make a sub-directory under the
admin/plugins/
directory on your server called mediagallery. </p>

<pre><code>path-to-geeklog/
               |
               + backups/
               + data/
               + language/
               + logs/
               + plugins/
               + public_html/
               |    |
               |    + admin/
               |           |
               |           + plugins/
               |                    |
               |                    + mediagallery &lt;--- Make this subdirectory
               + sql/
               + system/
               + db-config.php</code></pre>

<p>Next you will need to FTP all the files from the
c:\tmp\mediagallery\admin\* directory to your server.
Here you will want to select all the files and sub-directories in the admin\ directory,
not just the public_html\ folder. Follow the map below: </p>

<pre><code>tmp\            path-to-geeklog/
   |                           |
   + mediagallery\             + backups/
                 |             + data/
                 + admin\---+  + language/
                            |  + logs/
                            |  + plugins/
                            |  + public_html/
                            |         |
                            |         + admin/
                            |                |
                            |                + plugins/
                            |                         |
                            +-----------------------&gt; + mediagallery/
                               + sql/
                               + system/
                               + db-config.php</code></pre>

<p>Congratulations!
   You should now have all the files uploaded to your server and you are ready
   to skin to the Online Installation step below.</p>

<h3>Standard Shell Access Installation</h3>

<ol>

  <li>Backup your Geeklog database because the Media Gallery plugin adds tables.
      You can do this with the built in database backup facility in the Admin menu. </li>

  <li>Uncompress the Media Gallery plugin archive
      while in the path-to-geeklog/plugins directory.
      The archive will create a directory called mediagallery. </li>

  <li>In your public_html directory, create a directory called mediagallery. </li>

  <li>Under public_html/admin/plugins/ directory, create a directory called mediagallery. </li>

  <li>Change to your path-to-geeklog/plugins/mediagallery directory. </li>

  <li>Copy the files in the admin directory to 
      the admin/plugins/mediagallery directory you created in step 4. </li>

  <li>Copy the files in the public_html directory to the
      public_html/mediagallery directory you created in step 3.</li>

</ol>

<h3>Online Installation</h3>

<p>Now that you have the files loaded on your server,
it is time to actually perform the Media Gallery installation into Geeklog. </p>

<ol start="1" type="1">

  <li>Go to the plugin administration page.
      The Media Gallery plugin should show up with a link to install it. Click this link.
      The install page will tell you if it was successful or not.
      If not, examine the Geeklog error.log in path-to-geeklog/logs/ to see what the problem was.
      Fix the problem and re-install. </li>

  <li>The install page will offer you a link to the configuration page of Media Gallery.
      You should select this link and make the necessary changes to Media Gallery
      configuration to suit your environment. </li>

</ol>

<h3>Setting Permissions</h3>
<p style="color:red">The following directory permissions must be set 757 (or 777).</p>
<ul>
<li>private/plugins/mediagallery/tmp</li>
<li>private/plugins/mediagallery/uploads</li>
<li>public_html/mediagallery/mediaobjects/covers &nbsp;&nbsp;&nbsp;&nbsp;and the following directories</li>
<li>public_html/mediagallery/mediaobjects/disp   &nbsp;&nbsp;&nbsp;&nbsp;and the following directories</li>
<li>public_html/mediagallery/mediaobjects/orig   &nbsp;&nbsp;&nbsp;&nbsp;and the following directories</li>
<li>public_html/mediagallery/mediaobjects/tn     &nbsp;&nbsp;&nbsp;&nbsp;and the following directories</li>
</ul>

<h3>Standard Upgrade Process</h3>

<ol>
  <li>BACK UP YOUR EXISTING ENVIRONMENT!</li>

  <li>SAVE YOUR TEMPLATES IF YOU HAVE MADE MODIFICATIONS!
      You will need to re-apply your customizations to the templates after the upgrade.</li>

  <li>Refer to the installation instructions for New Installations for detailed
      instructions on uploading the new Media Gallery distribution to your server
      If you are prompted to overwrite existing files, be sure to answer Yes.</li>

  <li>Go to the Geeklog Plugins Menu (from the Geeklog Administrator&rsquo;s menu).</li>

  <li>Select mediagallery plugin.</li>

  <li>You should have an UPDATE button, select it.</li>

  <li>If all goes well, the upgrade should be complete.
      If there were errors, please review your logs/error.log
      and correct any issues and try the UPDATE again. </li>
</ol>

<h3>Post Upgrade Checks</h3>

<ul>
  <li>Verify all Media Gallery configuration settings.
      New in v1.4 is that all configuration options are now configured online,
      no longer in the config.php file.
      Go into the Media Gallery Administration Screen and select System Options
      and verify all your settings are as you would like.</li>

  <li>Verify that all your auto tags are correctly formatted.
      Depending on your previous version of Media Gallery,
      there have been several changes to how auto tags are used.</li>

  <li>If you are upgrading from a v1.6.x of Media Gallery, you should rebuild all thumbnails.
      Media Gallery has the ability to display larger (200x200 pixel) thumbnails,
      v0.8x and v0.9x created all thumbnails at 150x150 px size.
      See the Media Gallery Administration Screen for the Rebuild All Thumbnail option.</li>
</ul>

</body>
</html>
